---
title: Azure Stack Hub のクラウド間スケーリング パターン
description: Azure と Azure Stack Hub でスケーラブルなクラウド間アプリを構築する方法について説明します。
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: a830f96e97c347cbbcc09a1b17f4836ecb6eb3e6
ms.sourcegitcommit: a630894e5a38666c24e7be350f4691ffce81ab81
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2020
ms.locfileid: "80891033"
---
# <a name="cross-cloud-scaling-pattern"></a>クラウド間スケーリング パターン

負荷の増加に対応するために、既存のアプリにリソースを自動的に追加します。

## <a name="context-and-problem"></a>コンテキストと問題

アプリは、予期しない需要の増加に対応するために容量を増やすことはできません。 このように増量できないことで、使用量がピークの時間帯にユーザーがアプリにアクセスできなくなります。 アプリは一定数のユーザーにサービスを提供できます。

グローバル企業には、セキュリティで保護された、信頼性が高く、利用可能なクラウドベースのアプリが必要です。 需要の増加に対応し、適切なインフラストラクチャを使用してその需要をサポートすることが重要です。 ビジネスにとって、コストおよびメンテナンスと、ビジネス データのセキュリティ、ストレージ、リアルタイム可用性の間でバランスを取ることは困難になっています。

パブリック クラウドでアプリを実行できない可能性があります。 ただし、アプリの需要の急増に対処するためにオンプレミス環境で必要になる容量を維持することは、企業にとって経済的に見合わない場合があります。 このパターンでは、パブリック クラウドの弾力性をオンプレミス ソリューションで利用できます。

## <a name="solution"></a>解決策

クラウド間スケーリング パターンでは、ローカル クラウドに配置されたアプリを、パブリック クラウドのリソースを使用して拡張します。 このパターンは、需要の増減によってトリガーされ、クラウド内のリソースを追加または削除します。 これらのリソースは、冗長性、迅速な可用性、および地理的に準拠したルーティングを提供します。

![クラウド間スケーリング パターン](media/pattern-cross-cloud-scale/cross-cloud-scaling.png)

> [!NOTE]
> このパターンは、アプリのステートレス コンポーネントにのみ適用されます。

## <a name="components"></a>Components

クラウド間スケーリング パターンは、次のコンポーネントで構成されています。

### <a name="outside-the-cloud"></a>クラウドの外部

#### <a name="traffic-manager"></a>Traffic Manager

図では、これはパブリック クラウド グループの外側にありますが、ローカル データセンターとパブリック クラウドの両方でトラフィックを調整できる必要があります。 このバランサーは、エンドポイントを監視し、必要に応じてフェールオーバーの再分配を提供することによって、アプリの高可用性を実現します。

#### <a name="domain-name-system-dns"></a>ドメイン ネーム システム (DNS)

ドメイン ネーム システム (DNS) は、Web サイトまたはサービスの名前をその IP アドレスに変換する (または解決する) 役割を担います。

### <a name="cloud"></a>クラウド

#### <a name="hosted-build-server"></a>ホスト型ビルド サーバー

ビルド パイプラインをホストするための環境。

#### <a name="app-resources"></a>アプリ リソース

アプリ リソースは、仮想マシン スケール セットや Containers のように、スケールインとスケールアウトが可能である必要があります。

#### <a name="custom-domain-name"></a>カスタム ドメイン名

ルーティング要求 glob には、カスタム ドメイン名を使用します。

#### <a name="public-ip-addresses"></a>パブリック IP アドレス

パブリック IP アドレスは、受信トラフィックをトラフィック マネージャー経由でパブリック クラウド アプリのリソース エンドポイントにルーティングするために使用されます。  

### <a name="local-cloud"></a>ローカル クラウド

#### <a name="hosted-build-server"></a>ホスト型ビルド サーバー

ビルド パイプラインをホストするための環境。

#### <a name="app-resources"></a>アプリ リソース

アプリ リソースは、仮想マシン スケール セットや Containers のように、スケールインとスケールアウトが可能である必要があります。

#### <a name="custom-domain-name"></a>カスタム ドメイン名

ルーティング要求 glob には、カスタム ドメイン名を使用します。

#### <a name="public-ip-addresses"></a>パブリック IP アドレス

パブリック IP アドレスは、受信トラフィックをトラフィック マネージャー経由でパブリック クラウド アプリのリソース エンドポイントにルーティングするために使用されます。

## <a name="issues-and-considerations"></a>問題と注意事項

このパターンの実装方法を決めるときには、以下の点に注意してください。

### <a name="scalability"></a>スケーラビリティ

クラウド間スケーリングの主要構成要素はオンデマンド スケーリングを与える機能です。 スケーリングはパブリックとローカルのクラウド インフラストラクチャの間で行う必要があります。また、要求に関して、一貫性があり、信頼できるサービスを提供する必要があります。

### <a name="availability"></a>可用性

オンプレミス ハードウェア構成およびソフトウェア デプロイを通じて高可用性をもたらすように、ローカルでデプロイされたアプリが構成されていることを確認します。

### <a name="manageability"></a>管理の容易性

クラウド間パターンは、複数の環境にわたるシームレスな管理と使い慣れたインターフェイスを実現します。

## <a name="when-to-use-this-pattern"></a>このパターンを使用する状況

このパターンは次の目的で使用します。

- 予期しない需要や定期的な需要に応じてアプリの容量を増やす必要がある場合。
- ピーク時にしか使用されないリソースに投資したくない場合。 従量課金制となります。

このパターンは次の場合は推奨されません。

- インターネット経由で接続するユーザーがソリューションに必要である。
- 発信接続がオンサイト呼び出しからのものであることを要求するローカルの規制がビジネスに適用される。
- ネットワークで定期的なボトルネックが発生しており、これがスケーリングのパフォーマンスを制限している。
- 環境がインターネットから切断されていて、パブリック クラウドに接続できない。

## <a name="next-steps"></a>次のステップ

この記事で紹介したトピックの関連情報:

- この DNS ベースのトラフィック ロード バランサーの詳細なしくみについては、「[Traffic Manager について](/azure/traffic-manager/traffic-manager-overview)」を参照してください。
- ベスト プラクティスの詳細を確認し、その他の疑問の回答を取得するには、[ハイブリッド アプリケーションの設計上の考慮事項](overview-app-design-considerations.md)に関する記事を参照してください。
- 製品とソリューションのポートフォリオ全体の詳細について、[Azure Stack の製品ファミリとソリューション](/azure-stack)に関するページをご覧ください。

ソリューションの例をテストする準備ができたら、[クラウド間スケーリングのソリューション デプロイ ガイド](solution-deployment-guide-cross-cloud-scaling.md)に進んでください。 デプロイ ガイドでは、コンポーネントをデプロイしてテストするための詳細な手順について説明します。 Azure Stack Hub でホストされる Web アプリから Azure でホストされる Web アプリに切り替えるための手動トリガー プロセスを提供する、クラウド間ソリューションを作成する方法について学習します。 また、Traffic Manager を介して自動スケーリングを使用し、負荷に対して柔軟かつスケーラブルなクラウド ユーティリティを実現する方法についても学習します。
